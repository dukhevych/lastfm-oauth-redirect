<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
  </head>
  <body>
    <script>
      const params = new URLSearchParams(window.location.search);
      const token = params.get('token');
      const source = params.get('source');

      if (token) {
        chrome.runtime.sendMessage({ type: 'lastfm_token', token, source });
      }

      // Slight delay before closing (just in case)
      setTimeout(() => window.close(), 500);
    </script>
    <p>Authorizingâ€¦</p>
  </body>
</html>
